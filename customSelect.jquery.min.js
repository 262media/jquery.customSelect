(function(a){a.fn.extend({customSelect:function(b){if(!a.browser.msie||(a.browser.msie&&a.browser.version>6)){var c={customClass:null,mapClass:true,mapStyle:true};var b=a.extend(c,b);return this.each(function(){var h=a(this);var d=h.find(":selected");var f=d.html()||"&nbsp;";var j=a('<span class="customSelectInner" />').append(f);var i=a('<span class="customSelect" />').append(j);h.after(i);if(b.customClass){i.addClass(b.customClass)}if(b.mapClass){i.addClass(h.attr("class"))}if(b.mapStyle){i.attr("style",h.attr("style"))}var g=parseInt(h.outerWidth())-(parseInt(i.outerWidth())-parseInt(i.width()));i.css({display:"inline-block"});j.css({width:g,display:"inline-block"});var e=i.outerHeight();h.css({"-webkit-appearance":"menulist-button",width:i.outerWidth(),position:"absolute",opacity:0,height:e,fontSize:h.next().css("font-size")}).change(function(){j.text(h.find(":selected").text()).parent().addClass("customSelectChanged");setTimeout(function(){i.removeClass("customSelectOpen")},60)}).bind("mousedown",function(){i.toggleClass("customSelectOpen")}).focus(function(){i.addClass("customSelectFocus")}).blur(function(){i.removeClass("customSelectFocus customSelectOpen")})})}}})})(jQuery);